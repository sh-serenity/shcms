


<!doctype html>
<html lang="ru-RU">
<head>
<meta charset="utf-8">
<title>meathost.org</title>
    <meta http-equiv="Content-Type" content="text/html"; charset=utf-8">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" rel="stylesheet">
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

<!-- include summernote css/js -->
<link href="https://cdn.jsdelivr.net/npm/summernote@0.8.1/dist/summernote.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/summernote@0.8.1/dist/summernote.min.js"></script>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <div class=logo><center><img src="top.jpg"></center></div>
    <div class=sh style="background: red;"><center>Only registered and logined users can post. If you are not registered and then not logined - all that you are writting will go to hell. And now there is no checking. ARGH!! :))) </center></div>
    <div class=menu>
        <center><a class=sh href="/login.html">Login</a>|<a class=sh href="/register.html">Register</a></center>
    </div>
     <div class="sh">
    <form action="/addart" method="post">
        <p>Name: <input type="text" id="subj" name="subj" value="Subject">
    <textarea id="summernote" name="editordata"></textarea>
    
        <p><input type="submit" value="Отправить"></p>

<script>
$('#summernote').summernote({
    height: ($(window).height() - 300),
    callbacks: {
        onImageUpload: function(image) {
            uploadImage(image[0]);
        }
    }
});

function uploadImage(image) {
    var data = new FormData();
    data.append("image", image);
    $.ajax({    
        url: '/image',
        cache: false,
        contentType: false,
        processData: false,
        data: data,
        type: "post",
        success: function(url) {
            var image = $('<img>').attr('src', 'https://' + url);
            $('#summernote').summernote("insertNode", image[0]);
        },
        error: function(data) {
            console.log(data);
        }   
    });
}
</script>

 </p>

